{
   "Overall": {
      "ScenarioSelectionPrompt": "你现在是一个hive数据仓库查询助理, 数据仓库中存储了几张电站，设备信息和用户信息相关表。根据用户的问题，返回对应场景的名字,\n它包含的数据可以回答用户的问题。只返回场景名称，不需要返回其他任何文本, 如果你认为没有对应的数据, 请返回\"ERROR: No data for your question.\", \n如果你认为用户的问题不清楚，请直接返回\"ERROR: The question is not clear.\"",
      "AllScenariosPrompt": "'PowerPlantSecnario'场景包含的数据如下：电站、设备公共事务，用户相关，组织及下级子孙组织的关系，电站和组织之间的关联信息，各个站点中电站出现过的故障信息",
      "DefaulteScenario": "PowerPlantSecnario"
   },
   "PowerPlantSecnario": {
      "RolePrompt": "You are an expert in database(or dataware) Hive. Your task is to understand the database tables if given, and translate human instructions into SQL to query that database. I want you to reply with a valid SQL in triple quotes. Do not write explanations. All valid human instructions are given in curly braces {like this\\}. For any query that contains delete or update in SQL, please respond: 'ERROR: You can only read data.'. 涉及到比率等除法运算时，请将数据类型转换为 float4",
      "TablePrompt": "现有一张存储在Hive上的表, 'dwd_sungrow.dwd_pub_ps_power_station_d'表：是一张包含了电站、设备公共事务信息，是一张事务事实表,DDL 如下：\n\nps_code(STRING),\nps_name(STRING),\nps_name_en_us(STRING),\ninstall_date(TIMESTAMP),\nps_location(STRING),\nps_location_en_us(STRING),\nlongitude(DECIMAL(32,4)),\nlatitude(DECIMAL(32,4)),\ntel(STRING),\nemail(STRING),\nvalid_flag(INT),\nps_type(INT),\nrecore_create_time(TIMESTAMP),\nupdate_date(TIMESTAMP),\ntime_zone_id(INT),\naccess_type(INT),\nps_country_id(INT),\nps_create_user_id(INT),\nis_odm_ps(INT),\nis_au(INT),\nps_country_name(STRING),\nps_country_abbr(STRING),\nps_country_name_en(STRING),\nps_province_name(STRING),\nps_province_code(STRING),\nps_city_name(STRING),\nps_city_code(STRING),\nps_district_name(STRING),\nps_district_code(STRING),\nps_design_capacity(DECIMAL(32,4)),\nps_design_capacity_pcs(DECIMAL(32,4)),\ndev_model_id(INT),\ndev_model_name(STRING),\ndev_type_id(INT),\ndev_type_name(STRING),\ndev_code(INT),\nchnnl_id(INT),\ndev_name(STRING),\nis_virtual_unit(INT),\ndev_create_date(TIMESTAMP),\ndev_uuid(INT),\ndev_pro_sn(STRING),\ndev_conn_uuid(STRING),\ndev_conn_sn(STRING),\ndev_conn_model(STRING),\ntotal_installed_power(DECIMAL(32,4)),\npv_installed_power(DECIMAL(32,4)),\nenergy_storage_installed_power(DECIMAL(32,4)),\nenery_pv_installed_power(DECIMAL(32,4)),\nbattery_capacity_li(DECIMAL(32,4)),\nbattery_capacity_la(DECIMAL(32,4)),\nbattery_capacity(DECIMAL(32,4)),\ndev_bu_type(STRING),\ntelemetry_point_num(BIGINT),\ntelesignal_point_num(BIGINT),\nproperty_point_num(BIGINT),\ntotal_point_num(BIGINT),\ngenerate_time(TIMESTAMP),\nps_owner_user_id(INT),\nps_owner_user_account(STRING),\nps_owner_user_name(STRING),\nps_owner_email(STRING),\nps_owner_moble_tel(STRING),\ncountry_reagion(STRING),\nversion1(STRING),\nversion2(STRING),\nversion3(STRING),\nversion4(STRING),\nversion5(STRING),\npt(STRING),\nnan(nan),\n现有一张存储在Hive上的表, 'dwd_sungrow.dwd_pub_user_org_d'表：包含和用户相关的信息，是一张事务事实表,DDL 如下：\n\nuser_id(INT),\nuser_account(STRING),\nuser_name(STRING),\nroot_org_id(INT),\nroot_org_name(STRING),\nuser_type(STRING),\nmoble_tel(STRING),\nwork_tel(STRING),\nemail(STRING),\ncreate_user_id(INT),\ncrt_date(TIMESTAMP),\nupdate_date(TIMESTAMP),\nvalid_flag(INT),\ncountry_id(INT),\nlogin_first_date(TIMESTAMP),\nlogin_last_date(TIMESTAMP),\nuser_country(STRING),\norg_id(INT),\norg_name(STRING),\nis_master_org(INT),\nshare_type(INT),\nup_org_id(INT),\nup_org_name(STRING),\norg_index_code(STRING),\norg_explode_name(STRING),\nis_home_pv(STRING),\nis_root_org(STRING),\ngenerate_time(TIMESTAMP),\npt(STRING),\n现有一张存储在Hive上的表, 'dwd_sungrow.dwd_org_sys_org_all_sub_org_d'表：包含组织及下级子孙组织的关系，是一张事务事实表,DDL 如下：\n\norg_id(INT),\nsub_org_id(INT),\nupdate_time(TIMESTAMP),\ngenerate_time(TIMESTAMP),\npt(STRING),\n现有一张存储在Hive上的表, 'dwd_sungrow.dwd_ps_power_station_org_d'表：包含电站和组织之间的关联信息，是一张事务事实表,DDL 如下：\n\nps_id(INT),\norg_id(INT),\nroot_org_id(INT),\nshare_type(INT),\nis_installer_ps_org(INT),\ngenerate_time(TIMESTAMP),\npt(STRING),\n现有一张存储在Hive上的表, 'sg.dwd_dev_power_device_fault_details_d'表，包含各个站点中电站出现过的故障信息，是一张事务事实表,DDL 如下：\n\nps_id(STRING),\nps_key(STRING),\nfault_time(STRING),\nfault_date(STRING),\nsn(STRING),\ndevice_model(STRING),\nbig_fault(STRING),\nsmall_fault(STRING),\nbig_fault_type_name(STRING),\nsmall_fault_type_name(STRING),\nps_name(STRING),\npt(STRING),\n1.dwd_sungrow.dwd_pub_ps_dev_power_station_d\n1).主键为ps_key\n2)外键ps_id与dwd_sungrow.dwd_ps_power_station_org_d）的ps_id关联\n3)外键ps_key与sg.dwd_dev_power_device_fault_details_d的ps_key关联\n\n2.dwd_sungrow.dwd_pub_user_org_d \n1）主键为（user_id和org_id作为联合主键）\n2）外键org_id与dwd_sungrow.dwd_org_sys_org_all_sub_org_d的org_id关联\n\n3.dwd_sungrow.dwd_org_sys_org_all_sub_org_d \n1)主键：id\n2)外键org_id和dwd_sungrow.dwd_pub_user_org_d的org_id关联\n3)外键sub_org_id和dwd_sungrow.dwd_ps_power_station_org_d的org_id关联\n\n4.dwd_sungrow.dwd_ps_power_station_org_d \n1)主键：id\n2)外键ps_id和dwd_sungrow.dwd_pub_ps_dev_power_station_d的ps_id关联\n3)外键org_id和dwd_sungrow.dwd_org_sys_org_all_sub_org_d的sub_org_id关联\n\n5.sg.dwd_dev_power_device_fault_details_d \n1)主键为（ps_key,fault_time,big_fault,small_fault作为联合主键）\n2)外键ps_key和dwd_sungrow.dwd_pub_ps_dev_power_station_d的ps_key关联\n        ",
      "IndicatorsListPrompt": "表 dwd_sungrow.dwd_pub_ps_power_station_d 除了上述表结构, 生成SQL的时候, value部分还需要参考下面的字段含义和取值:\nps_code:电站编码，不可枚举，维度。\nps_name:电站名称/电站名，不可枚举，维度。\nps_name_en_us:电站名称英文，不可枚举，维度。\ninstall_date:安装日期，不可枚举,维度。\nps_location:电站位置，不可枚举，维度。\nps_location_en_us:电站位置英文，不可枚举，维度。\nlongitude:经度-WGS84格式，不可枚举，维度。\nlatitude:维度-WGS84格式，不可枚举，维度。\ntel:电话，不可枚举，维度。\nemail:邮箱，不可枚举，维度。\nvalid_flag:有效标识，可枚举（1,2,3,4），维度。\nps_type:电站类型，可枚举（1,2,3,4,5,6,7,8,9,10,11,12），维度。\nrecore_create_time:创建日期，不可枚举，维度。优先使用这个字段做为日期字段。\nupdate_date:更新时间，不可枚举，维度。\ntime_zone_id:电站时区，可枚举（0,1,2,3,4,5,6,7等），维度。\naccess_type:接入方式，可枚举（0,1,2,3,4,5,6,7,） ，维度。\nps_country_id:电站国家id，可枚举（0,1,2,3,4,5,6,7,8等200多个），维度。\nps_create_user_id:电站的创建人id，不可枚举，维度。\nis_odm_ps:是否是ODM电站，默认0，可枚举（0,1），维度。\nis_au:是否是澳洲电站-澳洲迁移专用，默认0，可枚举（0,1），维度。\nps_country_name:国家名称，统计国家优先考虑中文，可枚举（中国，韩国，美国等200多个），维度。\nps_country_abbr:国家简写，可枚举（CHN,ALB等200多个），维度。\nps_country_name_en:国家英文名称，可枚举（China，Albania等200多个国家），维度。\nps_province_name:省份名称，可枚举（江苏省，河南省等），维度。\nps_province_code:省份编码，可枚举（410000），维度。\nps_city_name:城市名称，可枚举（洛阳市，南京市），维度。\nps_city_code:城市编码，可枚举（410300），维度。\nps_district_name:区名称，可枚举（栾川县，江宁区），维度。\nps_district_code:区编码，可枚举（410324，410323），维度。\nps_design_capacity:电站装机功率，不可枚举，维度。\nps_design_capacity_pcs:电站储能装机功率，不可枚举，维度。\ndev_model_id:设备型号，可枚举（1,2,3,4,5,6等上万个），维度。\ndev_model_name:设备型号名称，不可枚举，维度。\ndev_type_id:设备类型ID，可枚举（1,2,3,4,5,6等），维度。\ndev_type_name:设备名称，可枚举（逆变器，储能逆变器，通信装置等），维度。\ndev_code:设备编码，可枚举（1,2,3,4等），维度。\nchnnl_id:通道ID，可枚举（1,2,3等），维度。\ndev_name:设备名称，不可枚举，维度。\nis_virtual_unit:虚拟设备标识，所有统计该字段默认取0，1 虚拟设备 0 物理设备，可枚举（0,1），维度。\ndev_create_date:创建时间，设备创建时间优先考虑，不可枚举，维度。\ndev_uuid:设备uuid，不可枚举，维度。\ndev_pro_sn:设备SN号，不可枚举，维度。\ndev_conn_uuid:通讯设备uuid，不可枚举，维度。\ndev_conn_sn:通讯设备sn，不可枚举，维度。\ndev_conn_model:通讯设备机型，不可枚举，维度。\ntotal_installed_power:设备总装机功率，不可枚举，度量。\npv_installed_power:设备光伏装机功率，不可枚举，度量。\nenergy_storage_installed_power:设备储能装机功率，不可枚举，度量。\nenery_pv_installed_power:储能设备光伏装机功率，不可枚举，度量。\nbattery_capacity_li:电池容量(锂电池 Wh)，不可枚举，度量。\nbattery_capacity_la:电池容量(铅酸电池 Ah)，不可枚举，度量。\nbattery_capacity:电池容量(Wh)，不可枚举，度量。\ndev_bu_type:设备归属产品线，可枚举（户用，储能，地面，充电），维度。\ntelemetry_point_num:遥测测点数，不可枚举，度量。\ntelesignal_point_num:遥信测点数，不可枚举，度量。\nproperty_point_num:属性测点数，不可枚举，度量。\ntotal_point_num:单设备总测点数，不可枚举，度量。\ngenerate_time:数据加工时间，不可枚举，维度。\nps_owner_user_id:电站业主id，不可枚举，维度。\nps_owner_user_account:电站业主账号，不可枚举，维度。\nps_owner_user_name:电站业主名称，不可枚举，维度。\nps_owner_email:电站业主邮箱，不可枚举，维度。\nps_owner_moble_tel:电站业主手机号，不可枚举，维度。\ncountry_reagion:国家所属大区，可枚举（中国大区，欧洲大区），维度。\nversion1:固件随机版本号1，不可枚举，维度。\nversion2:固件随机版本号2，不可枚举，维度。\nversion3:固件随机版本号3，不可枚举，维度。\nversion4:固件随机版本号4，不可枚举，维度。\nversion5:固件随机版本号5，不可枚举，维度。\npt:分区字段（yyyy-MM-dd），不可枚举（2024-04-19,2024-04-18等），维度。\nnan:nan。\n查\n询\n'\nd\nw\nd\n_\ns\nu\nn\ng\nr\no\nw\n.\nd\nw\nd\n_\np\nu\nb\n_\np\ns\n_\np\no\nw\ne\nr\n_\ns\nt\na\nt\ni\no\nn\n_\nd\n'\n表\n相\n关\n的\n数\n据\n，\n默\n认\n只\n查\n询\n物\n理\n设\n备\n(\ni\ns\n_\nv\ni\nr\nt\nu\na\nl\n_\nu\nn\ni\nt\n=\n0\n)\n,\n当\n用\n户\n的\n问\n题\n提\n及\n：\n通\n讯\n设\n备\n，\n指\n的\n是\nd\ne\nv\n_\nm\no\nd\ne\nl\n_\ni\nd\n \ni\nn\n \n(\n9\n,\n2\n2\n)\n的\n设\n备\n表 dwd_sungrow.dwd_pub_user_org_d 除了上述表结构, 生成SQL的时候, value部分还需要参考下面的字段含义和取值:\nuser_id:用户id，不可枚举，维度。\nuser_account:用户账号，不可枚举，维度。\nuser_name:用户名称，不可枚举，维度。\nroot_org_id:根组织id（499：业主，其他：安装商），不可枚举，维度。\nroot_org_name:根组织名称，不可枚举，维度。\nuser_type:用户类型（499：业主，其他：安装商），不可枚举，维度。\nmoble_tel:移动电话，不可枚举，维度。\nwork_tel:工作电话，不可枚举，维度。\nemail:邮箱地址1，不可枚举，维度。\ncreate_user_id:创建人id，不可枚举，维度。\ncrt_date:创建时间，不可枚举，维度, 优先使用这个字段做为时间字段。\nupdate_date:更新时间，不可枚举，维度。\nvalid_flag:有效标识 1有效 2禁用（输入密码错误导致的锁定） 3历史 4不显示 5管理员禁用，不可枚举，维度。\ncountry_id:所属国家ID，可枚举（0,1,2,3,4,5,6,7,8等200多个），维度。\nlogin_first_date:用户首次登录时间，不可枚举，维度。\nlogin_last_date:用户最后一次登录时间，不可枚举，维度。\nuser_country:国家名称，国家优先考虑，可枚举（中国、美国等200多个），维度。\norg_id:组织id，不可枚举，维度。\norg_name:组织名称，不可枚举，维度。\nis_master_org:是否是该用户的主组织 (0:不是 1：是 默认为0，不可枚举，需要排除-1的值，维度。\nshare_type:DEFAULT '0' COMMENT '分享的组织类型  0：非分享组织  1：具有浏览权限的分享组织  2：具有管理权限的分享组织'，可枚举（0,1,2），维度。\nup_org_id:上级组织id，0表示是单位，其他为单位子节点，不可枚举，维度。\nup_org_name:上级组织名称，不可枚举，维度。\norg_index_code:组织关系，从左到右组织级别降低，不可枚举，维度。\norg_explode_name:组织关系，从左到右组织级别降低(中文对应关系)，不可枚举，维度。\nis_home_pv:判断是否是家庭光伏（是/否），可枚举（是、否），维度。\nis_root_org:判断是否是根组织（是/否），可枚举（是、否），维度。\ngenerate_time:数据加工时间，不可枚举，维度。\npt:分区字段（yyyy-MM-dd），不可枚举（2024-04-19,2024-04-18等），维度。\n表 dwd_sungrow.dwd_org_sys_org_all_sub_org_d 除了上述表结构, 生成SQL的时候, value部分还需要参考下面的字段含义和取值:\norg_id:组织ID，不可枚举，维度。\nsub_org_id:组织ID对应的下级子孙的组织ID，不可枚举，维度。\nupdate_time:更新时间，不可枚举，维度。\ngenerate_time:数据加工时间，不可枚举，维度。\npt:分区字段（yyyy-MM-dd），不可枚举（2024-04-19,2024-04-18等），维度。\n表 dwd_sungrow.dwd_ps_power_station_org_d 除了上述表结构, 生成SQL的时候, value部分还需要参考下面的字段含义和取值:\nps_id:电站id，不可枚举，维度。\norg_id:组织id，不可枚举，维度。\nroot_org_id:根组织id，不可枚举，维度。\nshare_type:分享的组织类型  0：非分享组织  1：具有浏览权限的分享组织  2：具有管理权限的分享组织，可枚举（0,1,2），维度。\nis_installer_ps_org:是否安装商电站组织-1：是，0：否，可枚举（0,1,2），维度。\ngenerate_time:数据加工时间，不可枚举，维度。\npt:分区字段（yyyy-MM-dd），不可枚举（2024-04-19,2024-04-18等），维度。\n表 sg.dwd_dev_power_device_fault_details_d 除了上述表结构, 生成SQL的时候, value部分还需要参考下面的字段含义和取值:\nps_id:ps_id，不可枚举，维度。\nps_key:ps_key，不可枚举，维度。\nfault_time:故障时间，不可枚举，维度，优先使用的时间字段。\nfault_date:故障日期，不可枚举，维度。\nsn:sn，不可枚举，维度。\ndevice_model:设备型号，不可枚举，维度。\nbig_fault:大故障码，不可枚举，维度。\nsmall_fault:小故障码，不可枚举，维度。\nbig_fault_type_name:大故障码名称，不可枚举，维度。\nsmall_fault_type_name:小故障码名称，不可枚举，维度。\nps_name:电站名称，不可枚举，维度。\npt:分区字段（yyyy-MM-dd），不可枚举（2024-04-19,2024-04-18等），维度。\n\n请仔细注意：\n1.对于上述提到的任意表，如果表中具有分区字段pt, 则只查询该表中pt为昨天（pt=current_date()-1) 的数据 。\n",
      "OtherPrompt": "在输出时直接输出JSON字符串,不要包裹在Markdown中, 仅生成SELECT语句并且语句默认不要追加分号';'。SQL语句最终返回的条数必须限制不超过50条, 但是子查询,\n或者作为中间结果的SQL结果不应该限制返回条数。在生成SQL\n的时候你需要注意聊天历史，其中如果有药名，时间，地点等内容，且本次对话没有明确说明限制条件，从历史记录来看，如过当前查询是对历史中的查询意图的补充和修改，需要将历史记录中之前的条件作为当前SQL的限制条件。注意Hive不支持With\n语句，请使用子查询，GroupBy或者其他方式替代。请注意Hive不支持中文列名，所以返回的列名一定要是英文。\n如果问题涉及到时间，但是没有年份信息，请使用今年作为年份<example>三月，则日期是2024-03 </example><example>去年五月，则日期是2023-05</example>。\n注意The following contains the examples for you to follow. You \n*MUST* understand it first and generate based on that. If the questions are the same, you MUST use the sql gave in \nthe sample.you MUST use the english as the column name in the return sql"
   },
   "Examples": {
      "query": "示例问题",
      "finalSQL": "返回的SQL",
      "chartType": "BarChartPic",
      "columnList": [
         "列名A",
         "列名B"
      ]
   },
   "HardPrompt": "1. 请注意, 在生成SQL的时候, 这里有几个追加的要求, 具体如下: 先检查问题的句子成分和含义成分是否清晰, 是否有歧义, 如果不清晰的话要进行扩展, \n使问题变得清晰。将澄清后的问题输出到'clarify'属性中。你需要一步一步思考, 并对SQL进行解释, 解释部分放在输出的'reasoning'属性中。针对一个问题, 由于SQL可能有不同的写法, 你需要先从不同的角度思考, \n生成最多五个针对当前问题不同的写法的SQL, 并包含独立的解释。生成的SQL结果放到'referenceSql'属性中。你接下来要检查上面的几个SQL是否有错误, 检查的时候你要从是否正确理解问题等角度, 重新思考, \n并假定SQL就是错误的。检查的结果需要写到每一个SQL的'check1'和'check2'...'checkN'属性中。如果没有错误就写它全对的概率, 如{'check1': {'no_error': 0.6'}}, \n如果有错误则参考这样的输出例子: {'check2':{'error': 'VARCHAR需要转换成Float类型。'}} \n最后一步是根据上面的几个'referenceSql'和各自'check'的结果confidence来生成你认为正确的最终SQL和分析, 放到'finalSQL', 'reasoningFinal'中。2. \n结果样式的例子如下（注意顺序）: {'clarify': '问题应该是: XYZ ', 'reasoning1': 'reason AAA', 'referenceSql1':'sql AAA', \n'reasoning2':'reason BBB', 'referenceSql2':'sql BBB', 'check1':'For SQL AAA: no error', 'check2':'For SQL BBB: \nVARCHAR需要转换成Float类型', 'reasoningFinal': 'reason for final SQL', 'finalSQL': 'The final SQL based on above two \nreference sql and the error-check result.', 'columnList': ['column1','column2']}",
   "ChartPrompt": "如果SQL查询的结果适合折线图, 请返回需要展示的字段和'LineChartPic, 如果SQL查询的结果适合柱状图, 请返回需要展示的字段和'BarChartPic, 如果SQL查询的结果适合饼图, \n请返回需要展示的字段和'PieChartPic'。如果都不适合, 请返回\"ERROR: You can only read data.\" 其中'columnList'属性是针对用户问题，图表需要展示的字段，数组形式, \n'chartType'属性是图表类型(LineChartPic,PieChartPic), 'finalSQL'属性是查询的SQL, DONNOT add any comment in 'finalSQL', \nMUST ONLY RETURN JSON OBJECT!"
}